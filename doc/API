
Category: API                                                   January 2010
-------------                                                   ------------


                API SPECIFICATION FOR INTERFACING WITH QUBY
                ===========================================


      The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
      "OPTIONAL" in this document are to be interpreted as described in
      RFC 2119.





Roqua MUST create all answers in advance of being filled in. This
SHOULD be done by performing an HTTP/1.1 POST request to

      /questionnaires/$questionnaire_id/answers.json

The body payload of this request MUST define at least the patient_id
in JSON format:

      {
         patient_id: $patient_id
      }

wherein $patient_id MUST be a unique identifier for this patient.
A successful request SHALL return at least these JSON key-value pairs:

      {
         id: $answer_id
         questionnaire_id: $questionnaire_id
         patient_id: $patient_id
      }

Additional pairs MAY be returned. After filling in a questionnaire,
Roqua MAY request the answers by doing a HTTP/1.1 GET to

      /questionnaires/$questionnaire_id/$answer_id.json

This SHALL return at least these JSON key-value pairs:

     {
        id: $answer_id,
        questionnaire_id: $questionnaire_id,
        patient_id: $patient_id,
        answers: { ... }
     }

wherein answers is a JSON hash of $question_id: $answer_value. The
precise keys and possible values depend upon the questionnaire.
